-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local PathfindingService = game:GetService("PathfindingService")
local LocalPlayer = Players.LocalPlayer

-- Checkpoints
local Checkpoints = {
    Vector3.new(-412.20,252.31,762.63),
    Vector3.new(-363.79,391.31,530.98),
    Vector3.new(268.42,433.00,525.19),
    Vector3.new(322.83,493.31,356.48),
    Vector3.new(231.93,317.31,-144.80)
}

-- GUI
local main = Instance.new("ScreenGui")
main.Name = "AutoWalkGUI"
main.Parent = LocalPlayer:WaitForChild("PlayerGui")
main.ResetOnSpawn = false
main.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Frame utama
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 350, 0, 180)
frame.Position = UDim2.new(0.3,0,0.3,0)
frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
frame.BorderSizePixel = 0
frame.Parent = main
frame.Active = true
frame.Draggable = true

local uicorner = Instance.new("UICorner")
uicorner.CornerRadius = UDim.new(0,15)
uicorner.Parent = frame

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -40, 0, 30)
title.Position = UDim2.new(0, 10, 0, 10)
title.BackgroundTransparency = 1
title.Text = "Auto Walk System"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 20
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = frame

-- Close Button
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,30,0,30)
closeBtn.Position = UDim2.new(1, -35, 0, 5)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 20
closeBtn.BackgroundColor3 = Color3.fromRGB(200,0,0)
closeBtn.Parent = frame

-- Start Walk Toggle
local startBtn = Instance.new("TextButton")
startBtn.Size = UDim2.new(0,200,0,50)
startBtn.Position = UDim2.new(0.5, -100, 0, 80)
startBtn.Text = "Start Walk"
startBtn.Font = Enum.Font.SourceSansBold
startBtn.TextSize = 20
startBtn.TextColor3 = Color3.fromRGB(255,255,255)
startBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
startBtn.Parent = frame

local uicornerBtn = Instance.new("UICorner")
uicornerBtn.CornerRadius = UDim.new(0,12)
uicornerBtn.Parent = startBtn

-- Buat objek bulat panjang FK
local fkBtn = Instance.new("TextButton")
fkBtn.Size = UDim2.new(0,45,0,45)
fkBtn.Position = UDim2.new(0.5, -22, 0, 20)
fkBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
fkBtn.Text = "FK"
fkBtn.TextColor3 = Color3.fromRGB(255,255,255)
fkBtn.Font = Enum.Font.SourceSansBold
fkBtn.TextScaled = true
fkBtn.Parent = main
fkBtn.Visible = false
fkBtn.Active = true
fkBtn.Draggable = true

local fkCorner = Instance.new("UICorner")
fkCorner.CornerRadius = UDim.new(0.5,0)
fkCorner.Parent = fkBtn

-- Toggle Start Walk
local walkActive = false
local currentCheckpoint = 1
local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

startBtn.MouseButton1Click:Connect(function()
    walkActive = not walkActive
    startBtn.Text = walkActive and "Pause Walk" or "Start Walk"
end)

-- Close X
closeBtn.MouseButton1Click:Connect(function()
    frame.Visible = false
    fkBtn.Visible = true
end)

-- Tampilkan GUI kembali dari FK
fkBtn.MouseButton1Click:Connect(function()
    frame.Visible = true
    fkBtn.Visible = false
end)

-- Auto Walk Logic
spawn(function()
    while true do
        RunService.RenderStepped:Wait()
        if walkActive then
            local target = Checkpoints[currentCheckpoint]
            if target then
                local direction = (target - humanoidRootPart.Position).Unit
                humanoidRootPart.CFrame = humanoidRootPart.CFrame + direction * 1 -- kecepatan 1 bisa diubah

                -- cek jarak ke checkpoint
                if (humanoidRootPart.Position - target).Magnitude < 3 then
                    currentCheckpoint = currentCheckpoint + 1
                    if currentCheckpoint > #Checkpoints then
                        walkActive = false
                        startBtn.Text = "Start Walk"
                    end
                end
            end
        end
    end
end)
