-- SERVICES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- GUI utama
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "CheckpointRecorder"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Frame utama (16:9 proporsional, tidak terlalu besar)
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 640, 0, 360) -- 16:9
Frame.Position = UDim2.new(0.5, -320, 0.1, 0)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.BorderSizePixel = 2
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

-- Tombol Rekam CP
local RecordButton = Instance.new("TextButton")
RecordButton.Size = UDim2.new(0, 150, 0, 40)
RecordButton.Position = UDim2.new(0.5, -75, 0, 10)
RecordButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
RecordButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RecordButton.Font = Enum.Font.SourceSansBold
RecordButton.TextSize = 18
RecordButton.Text = "Rekam CP"
RecordButton.Parent = Frame

-- Scroll untuk menampilkan codingan checkpoint
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Size = UDim2.new(0, 620, 0, 300) -- cukup lebar agar teks terlihat
ScrollFrame.Position = UDim2.new(0, 10, 0, 60)
ScrollFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ScrollFrame.BorderSizePixel = 1
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.ScrollBarThickness = 10
ScrollFrame.Parent = Frame

-- UIListLayout untuk scroll
local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = ScrollFrame
UIListLayout.Padding = UDim.new(0, 5)

-- Tabel checkpoint
local checkpoints = {}
local checkpointIndex = 0

-- Fungsi rekam checkpoint
local function recordCheckpoint()
    checkpointIndex = checkpointIndex + 1
    local pos = HumanoidRootPart.Position
    table.insert(checkpoints, pos)
    
    -- Buat label baru untuk codingan
    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(1, -10, 0, 25)
    lbl.BackgroundTransparency = 1
    lbl.TextColor3 = Color3.fromRGB(255, 255, 255)
    lbl.Font = Enum.Font.SourceSans
    lbl.TextSize = 16
    lbl.TextXAlignment = Enum.TextXAlignment.Left
    lbl.Text = 'CEKPOINT KE '..checkpointIndex..' = Vector3.new('..string.format("%.2f", pos.X)..','..string.format("%.2f", pos.Y)..','..string.format("%.2f", pos.Z)..')'
    lbl.Parent = ScrollFrame

    -- Update canvas size supaya scroll bisa digulir
    ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y)
end

-- Tombol klik
RecordButton.MouseButton1Click:Connect(recordCheckpoint)
